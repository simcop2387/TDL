<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.8/jquery-ui.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.8/themes/base/jquery-ui.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all" />

<style>
	#sortable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
	#sortable li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px;}
	#sortable li span { position: absolute; margin-left: -1.3em; }
</style>
<script>
	$(function() {
		$( "#sortable" ).sortable({
			update: function(event, ui) {
				var fruitOrder = $(this).sortable("toArray", {attribute: "item"});
				alert(fruitOrder);
			}
		});
		$( "#sortable" ).disableSelection();
		$( "a", ".demo" ).button();
		$( "#additem", ".demo" ).click(function() { $("#adddialog").dialog('open'); return false; });
		$( "#adddialog" ).dialog({ autoOpen: false });
		$( "#datepicker", "#adddialog" ).datepicker();
		
		$( "#dialogadd", "#adddialog").click(function() {
			var title=$("#title", "#adddialog").val();
			var dueon=$("#datepicker", "#adddialog").val();

			/*i should do some checking here to see if it's all sane, don't give a shit right now*/			 
			$("#sortable").append('<li class="ui-state-default" item="'+title+'"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>'+title+'</li>');

			/*clear the dialog*/			
			$("#adddialog").dialog("close");
			$("#datepicker", "#adddialog").val("");
			$("#title", "#adddialog").val("");
		});
	});
</script>

</head>
<body>

<div class="demo">

<div id="adddialog" title="Add an item">
	Title: <input id="title" type="text" /><br />
	Due date: <input id="datepicker" type="text" />
	<button id="dialogadd">Add this</button>
</div>


<ul id="sortable">
</ul>
<a href="#" id="additem">Add an item</a>
</div><!-- End demo -->

</body>
</html>